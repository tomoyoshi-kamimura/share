<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>â‘¡ OPAæ§˜å‘ã‘ ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³æˆé•·æˆ¦ç•¥ã®ã”ææ¡ˆ</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #FDFBF7; /* Warm Neutral Background */
            color: #4A4A4A;
        }
        
        /* Chart Container Styling - MANDATORY constraint adherence */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%; /* Responsive handling */
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Custom Scrollbar for dashboard panels */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #ccc; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #aaa; 
        }

        .nav-item.active {
            background-color: #E5E0D8;
            border-left: 4px solid #D97706; /* Accent Amber */
            font-weight: 700;
        }

        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>

    <!-- Chosen Palette: Warm Neutrals (Base: #FDFBF7, Secondary: #E5E0D8, Accent: #D97706/Blue-Gray) -->
    <!-- Application Structure Plan: 
         Structure: Dashboard-style SPA with a left sidebar navigation representing the "4 Layers" of the proposal.
         Flow: 
         1. Intro (Problem/Concept) -> Users understand the "Black Box" issue.
         2. Marketing View -> Visualizing Acquisition (Web -> App).
         3. Operations View -> Visualizing Nurturing (App Usage/Rank).
         4. Tenant View -> Visualizing Content efficacy.
         5. Management View -> ROI and Partnership Roadmap.
         Why: This structure directly answers the prompt's request to separate the story for Marketing, Ops, Tenants, and Management, 
         while proving the "One Package" concept through a unified interface.
    -->
    <!-- Visualization & Content Choices:
         - Flowcharts (HTML/CSS Grid): To show the data pipeline without SVG.
         - Chart.js: For dynamic data simulation (e.g., changing ad spend affects chart).
         - Interactive Cards: To show detailed metrics defined in the source report (Miles, Ranks).
         - Justification: Provides a "tangible" feel of the proposed system.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="flex flex-col h-screen overflow-hidden text-slate-700">

    <!-- Top Header -->
    <header class="bg-white border-b border-gray-200 h-16 flex items-center justify-between px-6 z-10 shadow-sm flex-shrink-0">
        <div class="flex items-center gap-3">
            <div class="w-8 h-8 bg-slate-800 text-white rounded flex items-center justify-center font-bold text-lg">O</div>
            <h1 class="text-xl font-bold tracking-wide">OPA <span class="text-gray-400 font-normal text-sm ml-2">Data-Driven Growth Project</span></h1>
        </div>
        <div class="text-sm font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full">
            Phase 1 Proposal Draft
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden">
        <!-- Sidebar Navigation -->
        <nav class="w-64 bg-white border-r border-gray-200 flex flex-col flex-shrink-0 overflow-y-auto">
            <div class="p-6">
                <h2 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-4">ææ¡ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³</h2>
                <ul class="space-y-1">
                    <li>
                        <button onclick="navigate('overview')" id="nav-overview" class="nav-item active w-full text-left px-4 py-3 rounded-r-lg text-sm transition-colors hover:bg-gray-50">
                            ğŸ“Š ææ¡ˆæ¦‚è¦ãƒ»å…¨ä½“åƒ
                        </button>
                    </li>
                    <li>
                        <button onclick="navigate('marketing')" id="nav-marketing" class="nav-item w-full text-left px-4 py-3 rounded-r-lg text-sm transition-colors hover:bg-gray-50">
                            ğŸ¯ 1. é›†å®¢åˆ†æ <span class="text-xs text-gray-400 block mt-1">ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ‹…å½“æ§˜å‘ã‘</span>
                        </button>
                    </li>
                    <li>
                        <button onclick="navigate('operations')" id="nav-operations" class="nav-item w-full text-left px-4 py-3 rounded-r-lg text-sm transition-colors hover:bg-gray-50">
                            ğŸ“± 2. ã‚¢ãƒ—ãƒªæ´»ç”¨ãƒ»è‚²æˆ <span class="text-xs text-gray-400 block mt-1">é‹ç”¨æ‹…å½“æ§˜å‘ã‘</span>
                        </button>
                    </li>
                    <li>
                        <button onclick="navigate('tenant')" id="nav-tenant" class="nav-item w-full text-left px-4 py-3 rounded-r-lg text-sm transition-colors hover:bg-gray-50">
                            ğŸ›ï¸ 3. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è©•ä¾¡ <span class="text-xs text-gray-400 block mt-1">ãƒ†ãƒŠãƒ³ãƒˆæ‹…å½“æ§˜å‘ã‘</span>
                        </button>
                    </li>
                    <li>
                        <button onclick="navigate('management')" id="nav-management" class="nav-item w-full text-left px-4 py-3 rounded-r-lg text-sm transition-colors hover:bg-gray-50">
                            ğŸ“ˆ 4. çµŒå–¶ã‚µãƒãƒªãƒ¼ãƒ»ä¼´èµ° <span class="text-xs text-gray-400 block mt-1">çµŒå–¶å±¤ãƒ»é¤¨é•·æ§˜å‘ã‘</span>
                        </button>
                    </li>
                </ul>
            </div>
            
            <div class="mt-auto p-6 border-t border-gray-100 bg-slate-50">
                <div class="text-xs text-gray-500 mb-2 font-bold">PROPOSAL BY</div>
                <div class="flex items-center gap-2">
                    <div class="w-6 h-6 bg-slate-300 rounded-full flex items-center justify-center text-[10px]">S</div>
                    <span class="text-sm font-medium">SnowDecks & Prosysta</span>
                </div>
                <p class="text-xs text-gray-400 mt-2">ãƒ¯ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¼´èµ°æ”¯æ´</p>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="flex-1 bg-[#FDFBF7] overflow-y-auto p-8 relative" id="main-content">
            <!-- Content will be injected here via JS -->
        </main>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // Data Store based on Source Reports
        const reportData = {
            overview: {
                title: "é›†å®¢ã‹ã‚‰ãƒ•ã‚¡ãƒ³åŒ–ã¾ã§ã€é¡§å®¢è¡Œå‹•ã®ã€Œå…¨è²Œã€ã‚’å¯è¦–åŒ–ã™ã‚‹",
                subtitle: "ç¾çŠ¶ã®èª²é¡Œã¨ç›®æŒ‡ã™ä¸–ç•Œè¦³ï¼ˆBefore / Afterï¼‰",
                content: `
                    <div class="animate-fade-in space-y-8">
                        <div class="bg-white p-6 rounded-xl card-shadow border border-gray-100">
                            <h3 class="text-lg font-bold mb-4 border-b pb-2">ç¾çŠ¶ã®èª²é¡Œï¼šãƒ‡ãƒ¼ã‚¿ã®ã€Œãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã€åŒ–</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                                <div class="p-4 bg-gray-50 rounded-lg">
                                    <div class="text-3xl mb-2">ğŸ•µï¸â€â™‚ï¸</div>
                                    <div class="font-bold text-gray-700">åºƒå‘ŠåŠ¹æœãŒè¦‹ãˆãªã„</div>
                                    <div class="text-sm text-gray-500 mt-1">Webã§é›†å®¢ã—ã¦ã‚‚ã€èª°ãŒã‚¢ãƒ—ãƒªã‚’å…¥ã‚Œã¦æ¥åº—ã—ãŸã‹è¿½è·¡ã§ããªã„</div>
                                </div>
                                <div class="p-4 bg-gray-50 rounded-lg">
                                    <div class="text-3xl mb-2">ğŸŒ</div>
                                    <div class="font-bold text-gray-700">é›†è¨ˆãŒæ‰‹å‹•ã§é…ã„</div>
                                    <div class="text-sm text-gray-500 mt-1">é€±å ±ãƒ»æœˆå ±ä½œæˆã«å·¥æ•°ãŒå–ã‚‰ã‚Œã€æ–½ç­–ã®æŒ¯ã‚Šè¿”ã‚ŠãŒæ¬¡é€±ä»¥é™ã«ãªã‚‹</div>
                                </div>
                                <div class="p-4 bg-gray-50 rounded-lg">
                                    <div class="text-3xl mb-2">ğŸ“‰</div>
                                    <div class="font-bold text-gray-700">ãƒ‡ãƒ¼ã‚¿ã®åˆ†æ–­</div>
                                    <div class="text-sm text-gray-500 mt-1">Webï¼ˆGA4ï¼‰ã¨ã‚¢ãƒ—ãƒªï¼ˆæ´»å‹•ï¼‰ãŒåˆ¥ç®¡ç†ã§LTVãŒè¦‹ãˆãªã„</div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-xl card-shadow border-l-4 border-amber-500">
                            <h3 class="text-lg font-bold mb-4">ã”ææ¡ˆï¼šçµ±åˆãƒ‡ãƒ¼ã‚¿åˆ†æåŸºç›¤ã®æ§‹ç¯‰</h3>
                            <p class="text-sm text-gray-600 mb-6">ã€Œé›†å®¢ãƒ‡ãƒ¼ã‚¿ï¼ˆWebï¼‰ã€ã¨ã€Œæ´»å‹•ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¢ãƒ—ãƒªï¼‰ã€ã‚’BigQueryä¸Šã§çµ±åˆã€‚ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãªæ„æ€æ±ºå®šã‚’å®Ÿç¾ã—ã¾ã™ã€‚</p>
                            
                            <!-- Custom Flow Diagram using HTML/Grid (No SVG) -->
                            <div class="grid grid-cols-1 md:grid-cols-5 gap-2 items-center text-center text-xs font-bold">
                                <div class="bg-red-50 border border-red-200 p-4 rounded-lg flex flex-col gap-2 h-full justify-center">
                                    <span class="text-red-500 text-lg">Web / åºƒå‘Š</span>
                                    <span>Google Analytics 4</span>
                                    <span class="font-normal text-[10px] text-gray-500">é›†å®¢ãƒ‡ãƒ¼ã‚¿</span>
                                </div>
                                <div class="text-gray-300 text-xl">âœ</div>
                                <div class="bg-blue-50 border border-blue-200 p-4 rounded-lg flex flex-col gap-2 h-full justify-center">
                                    <span class="text-blue-500 text-lg">ã‚¢ãƒ—ãƒª / é¤¨å†…</span>
                                    <span>AWS (Activity)</span>
                                    <span class="font-normal text-[10px] text-gray-500">è‚²æˆãƒ‡ãƒ¼ã‚¿</span>
                                </div>
                                <div class="text-gray-300 text-xl">âœ</div>
                                <div class="bg-slate-800 text-white p-4 rounded-lg shadow-lg flex flex-col gap-2 h-full justify-center relative transform scale-105">
                                    <span class="text-amber-400 text-lg">BigQuery</span>
                                    <span>çµ±åˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</span>
                                    <div class="absolute -top-3 -right-3 bg-amber-500 text-white text-[10px] px-2 py-1 rounded-full">CORE</div>
                                </div>
                                <div class="text-gray-300 text-xl">âœ</div>
                                <div class="bg-white border-2 border-amber-500 border-dashed p-4 rounded-lg flex flex-col gap-2 h-full justify-center">
                                    <span class="text-amber-600 text-lg">Real-time BI</span>
                                    <span>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span>
                                    <span class="font-normal text-[10px] text-gray-500">å…¨ç¤¾å…±æœ‰</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            marketing: {
                title: "1. é›†å®¢åˆ†æï¼ˆãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ‹…å½“æ§˜å‘ã‘ï¼‰",
                subtitle: "ã€Œã©ã®åºƒå‘ŠãŒã€æœ¬å½“ã«ã‚¢ãƒ—ãƒªä¼šå“¡ã‚’é€£ã‚Œã¦ããŸã®ã‹ï¼Ÿã€ã‚’ç‰¹å®šã™ã‚‹",
                desc: "Webåºƒå‘Šã‚„SNSã‹ã‚‰ã®æµå…¥ãŒã€å˜ãªã‚‹ã€Œé–²è¦§ã€ã§çµ‚ã‚ã£ã¦ã„ã‚‹ã®ã‹ã€å®Ÿéš›ã®ã€Œã‚¢ãƒ—ãƒªDLãƒ»ä¼šå“¡ç™»éŒ²ã€ã«ç¹‹ãŒã£ã¦ã„ã‚‹ã®ã‹ã‚’å¯è¦–åŒ–ã—ã¾ã™ã€‚ROIï¼ˆæŠ•è³‡å¯¾åŠ¹æœï¼‰ã®ä½ã„æ–½ç­–ã‚’å³åº§ã«ã‚«ãƒƒãƒˆã—ã€åŠ¹æœã®é«˜ã„æ–½ç­–ã¸äºˆç®—ã‚’é›†ä¸­ã§ãã¾ã™ã€‚",
                chartId: "marketingChart",
                chartType: "bar"
            },
            operations: {
                title: "2. ã‚¢ãƒ—ãƒªæ´»ç”¨ãƒ»è‚²æˆï¼ˆé‹ç”¨æ‹…å½“æ§˜å‘ã‘ï¼‰",
                subtitle: "ã€Œãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¾Œã€ãƒ•ã‚¡ãƒ³ã«è‚²ã£ã¦ã„ã‚‹ã‹ï¼Ÿã€ã‚’è¿½è·¡ã™ã‚‹",
                desc: "ä¼šå“¡ãƒ©ãƒ³ã‚¯ï¼ˆãƒ–ãƒ­ãƒ³ã‚ºã€œãƒ—ãƒ©ãƒãƒŠï¼‰ã®æ¨ç§»ã‚„ã€ãƒã‚¤ãƒ«ï¼ˆæ¥åº—ãƒ»è³¼è²·ï¼‰ã®åˆ©ç”¨çŠ¶æ³ã‚’åˆ†æã€‚å˜ãªã‚‹ä¼šå“¡æ•°ã§ã¯ãªãã€ã€Œç¨¼åƒã—ã¦ã„ã‚‹ä¼šå“¡ã€ã‚’å¢—ã‚„ã™ãŸã‚ã®æ–½ç­–ï¼ˆã‚¯ãƒ¼ãƒãƒ³ã€ã‚¤ãƒ™ãƒ³ãƒˆï¼‰ã®åŠ¹æœã‚’æ¸¬å®šã—ã¾ã™ã€‚",
                chartId: "opsChart",
                chartType: "line"
            },
            tenant: {
                title: "3. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è©•ä¾¡ï¼ˆãƒ†ãƒŠãƒ³ãƒˆæ‹…å½“æ§˜å‘ã‘ï¼‰",
                subtitle: "ã€Œã©ã®ã‚·ãƒ§ãƒƒãƒ—æƒ…å ±ãŒã€æ¥åº—ã‚’ä¿ƒã—ãŸã‹ï¼Ÿã€ã‚’è©•ä¾¡ã™ã‚‹",
                desc: "ã‚¢ãƒ—ãƒªå†…ã®ã‚·ãƒ§ãƒƒãƒ—ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚„ç‰¹é›†è¨˜äº‹ã®é–²è¦§ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã€‚é–²è¦§è€…ãŒå®Ÿéš›ã«ãã®é€±æœ«ã«æ¥åº—ã—ãŸã‹ï¼ˆWeb to Offlineï¼‰ã®ç›¸é–¢ã‚’è¦‹ã‚‹ã“ã¨ã§ã€ãƒ†ãƒŠãƒ³ãƒˆã¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚„ã€äººæ°—ãƒ†ãƒŠãƒ³ãƒˆã¨ã®ã‚³ãƒ©ãƒœæ–½ç­–ç«‹æ¡ˆã«å½¹ç«‹ã¦ã¾ã™ã€‚",
                chartId: "tenantChart",
                chartType: "horizontalBar"
            },
            management: {
                title: "4. çµŒå–¶ã‚µãƒãƒªãƒ¼ãƒ»ä¼´èµ°æ”¯æ´ï¼ˆçµŒå–¶å±¤å‘ã‘ï¼‰",
                subtitle: "ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãè¿…é€Ÿãªæ„æ€æ±ºå®šã¨ã€ç¶™ç¶šçš„ãªæˆé•·æ”¯æ´",
                desc: "é€±æ¬¡ã®æ‰‹å‹•ãƒ¬ãƒãƒ¼ãƒˆã‚’æ’¤å»ƒã—ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãªçµŒå–¶ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸ã€‚ã•ã‚‰ã«ã€ãƒ„ãƒ¼ãƒ«å°å…¥ã ã‘ã§ãªãã€å®šä¾‹ä¼šã§ã®åˆ†æå ±å‘Šãƒ»æ–½ç­–ææ¡ˆã¾ã§ã‚’ã€Œãƒ¯ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ã§æä¾›ã—ã€ç¤¾å†…ã®ãƒ‡ãƒ¼ã‚¿äººæä¸è¶³ã‚’è£œå®Œã—ã¾ã™ã€‚",
                chartId: "roiChart",
                chartType: "doughnut" // Using a mix in the render function
            }
        };

        // Current State
        let currentSection = 'overview';
        let charts = {};

        // DOM Elements
        const mainContent = document.getElementById('main-content');

        // Initial Render
        window.addEventListener('DOMContentLoaded', () => {
            navigate('overview');
        });

        // Navigation Function
        function navigate(sectionId) {
            // Update State
            currentSection = sectionId;

            // Update UI (Nav styles)
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`nav-${sectionId}`).classList.add('active');

            // Render Content
            renderContent(sectionId);
        }

        // Content Rendering Logic
        function renderContent(sectionId) {
            const data = reportData[sectionId];
            
            if (sectionId === 'overview') {
                mainContent.innerHTML = `
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold mb-2">${data.title}</h2>
                        <p class="text-gray-500">${data.subtitle}</p>
                    </div>
                    ${data.content}
                `;
            } else if (sectionId === 'management') {
                // Special Layout for Management/Partnership
                mainContent.innerHTML = `
                    <div class="animate-fade-in">
                        <div class="mb-8">
                            <h2 class="text-2xl font-bold mb-2">${data.title}</h2>
                            <p class="text-gray-500">${data.subtitle}</p>
                            <p class="mt-4 text-sm bg-white p-4 rounded border border-gray-200 leading-relaxed">
                                ${data.desc}
                            </p>
                        </div>

                        <!-- KPI Cards -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                            <div class="bg-white p-4 rounded-lg shadow-sm border-t-4 border-amber-500 text-center">
                                <div class="text-xs text-gray-400">ãƒ¬ãƒãƒ¼ãƒˆä½œæˆå·¥æ•°</div>
                                <div class="text-2xl font-bold text-gray-800">0<span class="text-xs font-normal">æ™‚é–“</span></div>
                                <div class="text-xs text-green-500 font-bold">â–¼ 100%å‰Šæ¸›</div>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow-sm border-t-4 border-blue-500 text-center">
                                <div class="text-xs text-gray-400">ã‚¢ãƒ—ãƒªç¨¼åƒç‡</div>
                                <div class="text-2xl font-bold text-gray-800">18.5<span class="text-xs font-normal">%</span></div>
                                <div class="text-xs text-green-500 font-bold">â–² 3.2ptæ”¹å–„</div>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow-sm border-t-4 border-green-500 text-center">
                                <div class="text-xs text-gray-400">æ–½ç­–PDCAã‚µã‚¤ã‚¯ãƒ«</div>
                                <div class="text-2xl font-bold text-gray-800">é€±æ¬¡<span class="text-xs font-normal">åŒ–</span></div>
                                <div class="text-xs text-gray-500">ï¼ˆæ—§ï¼šæœˆæ¬¡ï¼‰</div>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow-sm border-t-4 border-purple-500 text-center">
                                <div class="text-xs text-gray-400">ãƒ‡ãƒ¼ã‚¿æ´»ç”¨ã‚³ã‚¹ãƒˆ</div>
                                <div class="text-2xl font-bold text-gray-800">æœ€é©<span class="text-xs font-normal">åŒ–</span></div>
                                <div class="text-xs text-gray-500">ä¼´èµ°æ”¯æ´è¾¼ã¿</div>
                            </div>
                        </div>

                        <!-- Roadmap / Partnership Visual -->
                        <div class="bg-white p-6 rounded-xl card-shadow mb-8">
                            <h3 class="text-lg font-bold mb-4">ãƒ¯ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¼´èµ°æ”¯æ´ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</h3>
                            <div class="relative pl-8 border-l-2 border-gray-200 space-y-8">
                                <div class="relative">
                                    <div class="absolute -left-[41px] bg-amber-500 w-6 h-6 rounded-full border-4 border-white"></div>
                                    <h4 class="font-bold text-gray-800">Phase 1: å¯è¦–åŒ–ãƒ»åŸºç›¤æ§‹ç¯‰ï¼ˆå³æ™‚ï¼‰</h4>
                                    <p class="text-sm text-gray-600 mt-1">æ‰‹å‹•é›†è¨ˆã®è‡ªå‹•åŒ–ã¨ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®å°å…¥ã€‚ã¾ãšã¯ã€Œç¾çŠ¶ã‚’æ­£ã—ãè¦‹ã‚‹ã€ç’°å¢ƒã‚’ä½œã‚Šã¾ã™ã€‚</p>
                                </div>
                                <div class="relative">
                                    <div class="absolute -left-[41px] bg-blue-500 w-6 h-6 rounded-full border-4 border-white"></div>
                                    <h4 class="font-bold text-gray-800">Phase 2: æ–½ç­–é€£å‹•ãƒ»æ”¹å–„ï¼ˆã€œ3ãƒ¶æœˆï¼‰</h4>
                                    <p class="text-sm text-gray-600 mt-1">å®šä¾‹ä¼šã«ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å…ƒã«ã—ãŸæ–½ç­–ï¼ˆã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒ»ç‰¹é›†ï¼‰ã‚’ææ¡ˆã€‚çµæœã‚’æ¤œè¨¼ã—ã€å‹ã¡ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¦‹ã¤ã‘ã¾ã™ã€‚</p>
                                </div>
                                <div class="relative">
                                    <div class="absolute -left-[41px] bg-green-500 w-6 h-6 rounded-full border-4 border-white"></div>
                                    <h4 class="font-bold text-gray-800">Phase 3: è‡ªå‹•åŒ–ãƒ»ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºï¼ˆã€œ6ãƒ¶æœˆï¼‰</h4>
                                    <p class="text-sm text-gray-600 mt-1">ã€Œã“ã®ãƒ©ãƒ³ã‚¯ã®äººã«ã¯ã“ã®ã‚¯ãƒ¼ãƒãƒ³ã€ã¨ã„ã£ãŸMAï¼ˆãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¸æ‹¡å¼µã—ã¾ã™ã€‚</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                // Dashboard Layout for Marketing, Ops, Tenant
                mainContent.innerHTML = `
                    <div class="animate-fade-in h-full flex flex-col">
                        <div class="mb-6 flex-shrink-0">
                            <h2 class="text-2xl font-bold mb-2">${data.title}</h2>
                            <p class="text-gray-500">${data.subtitle}</p>
                            <p class="mt-4 text-sm bg-white p-4 rounded border border-gray-200 leading-relaxed">
                                ${data.desc}
                            </p>
                        </div>

                        <!-- Interactive Controls Area -->
                        <div class="bg-white p-4 rounded-lg shadow-sm mb-4 border border-gray-100 flex flex-wrap gap-4 items-center flex-shrink-0">
                            <span class="text-xs font-bold text-gray-500 uppercase">Interactive Sim:</span>
                            <div class="flex items-center gap-2">
                                <label class="text-xs">æœŸé–“:</label>
                                <select class="text-sm border rounded px-2 py-1 bg-gray-50" onchange="updateChartSim('${sectionId}')">
                                    <option>ç›´è¿‘30æ—¥</option>
                                    <option>ä»ŠæœŸç´¯è¨ˆ</option>
                                </select>
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="text-xs">ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ:</label>
                                <select class="text-sm border rounded px-2 py-1 bg-gray-50" onchange="updateChartSim('${sectionId}')">
                                    <option>å…¨ä½“</option>
                                    <option>æ–°è¦ä¼šå“¡ã®ã¿</option>
                                    <option>æ—¢å­˜ä¼šå“¡ã®ã¿</option>
                                </select>
                            </div>
                            <button class="ml-auto text-xs bg-amber-500 hover:bg-amber-600 text-white px-3 py-1 rounded transition-colors" onclick="alert('å®Ÿéš›ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã¯ã€ã“ã®æ¡ä»¶ã§å³åº§ã«ãƒ‡ãƒ¼ã‚¿ãŒå†é›†è¨ˆã•ã‚Œã¾ã™ã€‚')">
                                â–¶ åˆ†æå®Ÿè¡Œ
                            </button>
                        </div>

                        <!-- Chart Area -->
                        <div class="bg-white p-6 rounded-xl card-shadow flex-1 min-h-0 flex flex-col">
                            <h3 class="text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider">Analysis Visualization</h3>
                            <div class="chart-container flex-1">
                                <canvas id="${data.chartId}"></canvas>
                            </div>
                            <div class="mt-4 pt-4 border-t border-gray-100 text-xs text-gray-400 text-center">
                                â€» ã“ã®ã‚°ãƒ©ãƒ•ã¯ãƒ‡ãƒ¢ç”¨ã®ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã§æç”»ã•ã‚Œã¦ã„ã¾ã™ã€‚å®Ÿéš›ã«ã¯BigQueryã®ãƒ‡ãƒ¼ã‚¿ãŒé€£æºã•ã‚Œã¾ã™ã€‚
                            </div>
                        </div>
                    </div>
                `;
                
                // Initialize Chart after DOM injection
                setTimeout(() => initChart(sectionId, data.chartId), 0);
            }
        }

        // Chart Logic
        function initChart(sectionId, canvasId) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            
            // Cleanup existing chart if any
            if (charts[canvasId]) {
                charts[canvasId].destroy();
            }

            let config = {};

            if (sectionId === 'marketing') {
                // Stacked Bar: Traffic Source -> Conversion
                config = {
                    type: 'bar',
                    data: {
                        labels: ['Instagramåºƒå‘Š', 'Googleæ¤œç´¢', 'LINEå…¬å¼', 'Webè¨˜äº‹A', 'åº—èˆ—QR'],
                        datasets: [
                            {
                                label: 'Webè¨ªå•æ•° (Click)',
                                data: [1200, 1900, 800, 500, 300],
                                backgroundColor: '#E2E8F0',
                                stack: 'Stack 0',
                            },
                            {
                                label: 'ã‚¢ãƒ—ãƒªDLæ•° (CV)',
                                data: [150, 80, 200, 60, 250], // High CV rate for QR and LINE
                                backgroundColor: '#D97706', // Amber accent
                                stack: 'Stack 0',
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                callbacks: {
                                    afterBody: function(context) {
                                        const web = context[0].raw;
                                        const app = context[1].raw;
                                        const rate = ((app / (web + app)) * 100).toFixed(1);
                                        return `CVR (æ¨å®š): ${rate}%`;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: { stacked: true },
                            y: { stacked: true }
                        }
                    }
                };
            } else if (sectionId === 'operations') {
                // Line Chart: Active Users & Rank Up
                config = {
                    type: 'line',
                    data: {
                        labels: ['1æœˆ1é€±', '1æœˆ2é€±', '1æœˆ3é€±', '1æœˆ4é€±', '2æœˆ1é€±'],
                        datasets: [
                            {
                                label: 'ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ä¼šå“¡æ•°',
                                data: [5000, 5200, 5100, 5800, 6200],
                                borderColor: '#3B82F6',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                fill: true,
                                tension: 0.4
                            },
                            {
                                label: 'ãƒã‚¤ãƒ«åˆ©ç”¨å›æ•°',
                                data: [1200, 1300, 1250, 1800, 2100], // Campaign effect
                                borderColor: '#F59E0B',
                                borderDash: [5, 5],
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            mode: 'index',
                            intersect: false,
                        },
                    }
                };
            } else if (sectionId === 'tenant') {
                // Horizontal Bar: Tenant Ranking
                config = {
                    type: 'bar',
                    indexAxis: 'y',
                    data: {
                        labels: ['Shop A (ã‚«ãƒ•ã‚§)', 'Shop B (ã‚¢ãƒ‘ãƒ¬ãƒ«)', 'Shop C (é›‘è²¨)', 'Shop D (ã‚³ã‚¹ãƒ¡)', 'Shop E (æ›¸ç±)'],
                        datasets: [
                            {
                                label: 'ã‚¢ãƒ—ãƒªãŠæ°—ã«å…¥ã‚Šç™»éŒ²æ•°',
                                data: [350, 280, 220, 190, 150],
                                backgroundColor: '#64748B',
                            },
                            {
                                label: 'è¨˜äº‹çµŒç”±ã®æ¥åº—æ¤œçŸ¥æ•°',
                                data: [120, 40, 80, 95, 30],
                                backgroundColor: '#10B981', // Green for success/visit
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: { stacked: false },
                            y: { stacked: true }
                        }
                    }
                };
            }

            charts[canvasId] = new Chart(ctx, config);
        }

        // Mock Simulation Update
        function updateChartSim(sectionId) {
            let chartId;
            if (sectionId === 'marketing') chartId = 'marketingChart';
            else if (sectionId === 'operations') chartId = 'opsChart';
            else if (sectionId === 'tenant') chartId = 'tenantChart';

            if (charts[chartId]) {
                const chart = charts[chartId];
                // Randomize data slightly to simulate "Filtering" or "Scenario Change"
                chart.data.datasets.forEach((dataset) => {
                    dataset.data = dataset.data.map(val => {
                        const change = Math.floor(Math.random() * 20) - 10;
                        return Math.max(0, val + change);
                    });
                });
                chart.update();
            }
        }

    </script>
</body>
</html>